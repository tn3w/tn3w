<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Massenspektrograf</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        />
        <script
            defer="defer"
            src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
        ></script>
        <script
            defer="defer"
            src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        ></script>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: 'Segoe UI', system-ui, sans-serif;
                background: #fff;
                color: #222;
                line-height: 1.7;
                padding: 40px 20px;
                max-width: 800px;
                margin: 0 auto;
            }
            h1 {
                font-size: 1.8rem;
                font-weight: 600;
                margin-bottom: 8px;
            }
            h2 {
                font-size: 1.2rem;
                font-weight: 600;
                margin: 40px 0 16px;
                color: #333;
            }
            h3 {
                font-size: 1rem;
                font-weight: 600;
                margin: 24px 0 12px;
                color: #444;
            }
            p {
                margin-bottom: 12px;
            }
            ol,
            ul {
                margin: 12px 0 12px 24px;
            }
            li {
                margin: 6px 0;
            }
            hr {
                border: none;
                border-top: 1px solid #eee;
                margin: 40px 0;
            }
            .subtitle {
                color: #666;
                margin-bottom: 30px;
            }
            .author-line {
                color: #666;
                margin-bottom: 30px;
            }
            .aufgabe {
                background: #f8f8f8;
                padding: 20px;
                border-radius: 8px;
                margin: 20px 0;
            }
            .aufgabe p {
                margin-bottom: 16px;
            }
            .teilaufgabe {
                margin: 12px 0;
                padding-left: 8px;
                border-left: 3px solid #ddd;
            }
            .teilaufgabe strong {
                color: #c0392b;
            }
            .formula {
                background: #fffbeb;
                padding: 16px;
                border-radius: 6px;
                margin: 16px 0;
                border-left: 3px solid #f59e0b;
                overflow-x: auto;
            }
            .result {
                background: #ecfdf5;
                padding: 16px;
                border-radius: 6px;
                margin: 16px 0;
                border-left: 3px solid #10b981;
            }
            .merke {
                background: #fef3c7;
                padding: 16px;
                border-radius: 6px;
                margin: 16px 0;
                border-left: 3px solid #d97706;
            }
            .merke strong {
                color: #92400e;
            }
            .hinweis {
                background: #e0f2fe;
                padding: 16px;
                border-radius: 6px;
                margin: 16px 0;
                border-left: 3px solid #0284c7;
            }
            .step {
                background: #f8fafc;
                border: 1px solid #e2e8f0;
                border-radius: 8px;
                padding: 16px;
                margin: 16px 0;
            }
            .step-number {
                display: inline-block;
                background: #3b82f6;
                color: #fff;
                width: 24px;
                height: 24px;
                border-radius: 50%;
                text-align: center;
                line-height: 24px;
                font-size: 0.85rem;
                margin-right: 8px;
            }
            .direction {
                display: inline-block;
                padding: 4px 12px;
                border-radius: 4px;
                font-weight: 500;
                margin: 4px 0;
            }
            .dir-up {
                background: #dcfce7;
                color: #166534;
            }
            #canvas-container {
                flex: 1;
                min-width: 300px;
                height: 280px;
                border-radius: 8px;
                overflow: hidden;
                background: #fafafa;
                border: 1px solid #eee;
            }
            #screen-diagram {
                width: 200px;
                height: 280px;
                background: #fafafa;
                border: 1px solid #eee;
                border-radius: 8px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 10px;
            }
            #screenCanvas {
                background: #fff;
                border: 1px solid #ddd;
            }
            .diagram-label {
                font-size: 0.8rem;
                color: #666;
                margin-top: 8px;
                text-align: center;
            }
            .sim-controls {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-bottom: 20px;
            }
            .sim-controls button {
                background: #333;
                color: #fff;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 0.85rem;
            }
            .sim-controls button:hover {
                background: #555;
            }
            .param-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 16px;
                margin: 20px 0;
            }
            .param-item label {
                display: block;
                font-size: 0.85rem;
                color: #555;
                margin-bottom: 6px;
            }
            .param-item input[type='range'] {
                width: 100%;
            }
            .param-item .value {
                font-weight: 600;
                font-size: 0.9rem;
            }
            .isotope-selection {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin: 12px 0;
            }
            .isotope-checkbox {
                display: flex;
                align-items: center;
                gap: 6px;
                cursor: pointer;
            }
            .isotope-checkbox input {
                width: 16px;
                height: 16px;
                cursor: pointer;
            }
            .isotope-checkbox span {
                padding: 4px 10px;
                border-radius: 4px;
                font-size: 0.85rem;
                color: #fff;
                font-weight: 500;
            }
            .calc-result {
                font-family: monospace;
                background: #f5f5f5;
                padding: 12px;
                border-radius: 6px;
                margin: 12px 0;
            }
            .calc-result p {
                margin: 6px 0;
            }
            .measure-inputs {
                display: flex;
                gap: 16px;
                margin: 12px 0;
                flex-wrap: wrap;
            }
            .measure-inputs label {
                font-size: 0.9rem;
            }
            .measure-inputs input[type='number'] {
                width: 80px;
                padding: 6px;
                border: 1px solid #ddd;
                border-radius: 4px;
                margin-left: 8px;
            }
            .screen-coords {
                font-family: monospace;
                font-size: 0.9rem;
                color: #666;
                margin-top: 8px;
            }
            .presentation-btn {
                position: fixed;
                top: 20px;
                right: 20px;
                background: #3b82f6;
                color: #fff;
                border: none;
                padding: 10px 20px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 0.9rem;
                font-weight: 500;
                z-index: 1000;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }
            .presentation-btn:hover {
                background: #2563eb;
            }
            body.presentation-mode {
                padding: 0;
                max-width: none;
                overflow: hidden;
            }
            body.presentation-mode .presentation-btn {
                display: none;
            }
            body.presentation-mode > :not(.presentation-overlay) {
                display: none !important;
            }
            .presentation-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: #fff;
                z-index: 10000;
            }
            body.presentation-mode .presentation-overlay {
                display: flex;
                flex-direction: column;
            }
            .slide {
                display: none;
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                padding: 40px 60px;
                box-sizing: border-box;
                overflow: auto;
            }
            .slide.active {
                display: flex;
                flex-direction: column;
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide {
                    padding: 25px 40px;
                }
            }
            @media (max-width: 1024px) {
                .slide {
                    padding: 20px 25px;
                }
            }
            .slide-title {
                flex-direction: row !important;
                align-items: center;
                justify-content: center;
                gap: 80px;
            }
            .slide-title .title-content {
                text-align: left;
            }
            .slide-title h1 {
                font-size: 4rem;
                margin-bottom: 20px;
            }
            .slide-title .author {
                font-size: 1.8rem;
                color: #666;
            }
            .slide-title .qr-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .slide-title .qr-container img {
                width: 280px;
                height: 280px;
                border: 1px solid #ddd;
                border-radius: 8px;
            }
            .slide-title .qr-label {
                margin-top: 16px;
                font-size: 1rem;
                color: #888;
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide-title {
                    flex-direction: column !important;
                    gap: 30px;
                }
                .slide-title .title-content {
                    text-align: center;
                }
                .slide-title h1 {
                    font-size: 2.8rem;
                }
                .slide-title .author {
                    font-size: 1.4rem;
                }
                .slide-title .qr-container img {
                    width: 200px;
                    height: 200px;
                }
            }
            @media (max-width: 1024px) {
                .slide-title {
                    flex-direction: column !important;
                    gap: 20px;
                }
                .slide-title .title-content {
                    text-align: center;
                }
                .slide-title h1 {
                    font-size: 2rem;
                }
                .slide-title .author {
                    font-size: 1.1rem;
                }
                .slide-title .qr-container img {
                    width: 150px;
                    height: 150px;
                }
                .slide-title .qr-label {
                    font-size: 0.85rem;
                }
            }
            .slide-task {
                justify-content: center;
                align-items: center;
            }
            .slide-task .task-content {
                max-width: 900px;
                font-size: 1.3rem;
                line-height: 2;
            }
            .slide-task .task-content p {
                margin-bottom: 30px;
            }
            .slide-task .teilaufgabe {
                margin: 20px 0;
                padding: 16px 20px;
                border-left: 4px solid #3b82f6;
                background: #f8fafc;
                border-radius: 0 8px 8px 0;
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide-task .task-content {
                    font-size: 1.15rem;
                    line-height: 1.8;
                }
                .slide-task .task-content p {
                    margin-bottom: 20px;
                }
                .slide-task .teilaufgabe {
                    margin: 14px 0;
                    padding: 14px 16px;
                }
            }
            @media (max-width: 1024px) {
                .slide-task .task-content {
                    font-size: 0.95rem;
                    line-height: 1.6;
                }
                .slide-task .task-content p {
                    margin-bottom: 15px;
                }
                .slide-task .teilaufgabe {
                    margin: 10px 0;
                    padding: 10px 12px;
                }
            }
            .slide-simulation {
                height: 100vh;
                max-height: 100vh;
                overflow: hidden;
            }
            .slide-simulation h2 {
                font-size: 2rem;
                margin-bottom: 20px;
                text-align: center;
                flex-shrink: 0;
            }
            .slide-simulation .sim-wrapper {
                display: flex;
                gap: 30px;
                flex: 1;
                min-height: 0;
                max-height: calc(100vh - 200px);
            }
            .slide-simulation #pres-canvas-container {
                flex: 1;
                min-height: 200px;
                max-height: 100%;
                border-radius: 12px;
                overflow: hidden;
                background: #fafafa;
                border: 1px solid #eee;
            }
            .slide-simulation #pres-screen-diagram {
                width: 280px;
                flex-shrink: 0;
                background: #fafafa;
                border: 1px solid #eee;
                border-radius: 12px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }
            .slide-simulation .sim-controls-pres {
                display: flex;
                gap: 12px;
                justify-content: center;
                margin-top: 20px;
                flex-shrink: 0;
            }
            .slide-simulation .sim-controls-pres button {
                background: #333;
                color: #fff;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
            }
            .slide-simulation .sim-controls-pres button:hover {
                background: #555;
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide-simulation h2 {
                    font-size: 1.4rem;
                    margin-bottom: 10px;
                }
                .slide-simulation .sim-wrapper {
                    gap: 15px;
                    max-height: calc(100vh - 120px);
                    overflow: hidden;
                }
                .slide-simulation #pres-canvas-container {
                    flex: 1;
                    min-height: 0;
                }
                .slide-simulation #pres-screen-diagram {
                    width: 200px;
                    flex-shrink: 0;
                    padding: 10px;
                }
                .slide-simulation #pres-screen-diagram canvas {
                    max-width: 180px;
                    max-height: 180px;
                }
                .slide-simulation .sim-controls-pres {
                    display: none;
                }
            }
            @media (max-width: 1024px) {
                .slide-simulation h2 {
                    font-size: 1.3rem;
                    margin-bottom: 10px;
                }
                .slide-simulation .sim-wrapper {
                    flex-direction: column;
                    gap: 10px;
                    max-height: calc(100vh - 100px);
                    overflow: hidden;
                }
                .slide-simulation #pres-canvas-container {
                    flex: 1;
                    min-height: 0;
                    max-height: calc(100vh - 280px);
                    width: 100%;
                }
                .slide-simulation #pres-screen-diagram {
                    width: 100%;
                    height: auto;
                    min-height: 140px;
                    max-height: 160px;
                    padding: 8px;
                    flex-shrink: 0;
                }
                .slide-simulation #pres-screen-diagram canvas {
                    max-width: 140px;
                    max-height: 140px;
                }
                .slide-simulation .sim-controls-pres {
                    display: none;
                }
            }
            .slide-solution {
                overflow: auto;
            }
            .slide-solution h2 {
                font-size: 2.8rem;
                margin-bottom: 30px;
                color: #1e40af;
            }
            .slide-solution h3 {
                font-size: 1.6rem;
                margin: 20px 0 12px;
            }
            .slide-solution .content-wrapper {
                max-width: 1200px;
                margin: 0 auto;
                font-size: 1.3rem;
                line-height: 1.8;
            }
            .slide-solution .hinweis,
            .slide-solution .merke,
            .slide-solution .result,
            .slide-solution .step {
                font-size: 1.3rem;
                padding: 20px 24px;
            }
            .slide-solution ol li,
            .slide-solution p,
            .slide-solution ul li {
                font-size: 1.3rem;
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide-solution h2 {
                    font-size: 1.8rem;
                    margin-bottom: 15px;
                }
                .slide-solution h3 {
                    font-size: 1.2rem;
                    margin: 12px 0 8px;
                }
                .slide-solution .content-wrapper {
                    font-size: 1.05rem;
                    line-height: 1.6;
                }
                .slide-solution .hinweis,
                .slide-solution .merke,
                .slide-solution .result,
                .slide-solution .step {
                    font-size: 1.05rem;
                    padding: 12px 14px;
                    margin: 10px 0;
                }
                .slide-solution ol li,
                .slide-solution p,
                .slide-solution ul li {
                    font-size: 1.05rem;
                }
                .slide-solution .formula {
                    padding: 10px 14px;
                    margin: 10px 0;
                }
            }
            @media (max-width: 1024px) {
                .slide-solution h2 {
                    font-size: 1.5rem;
                    margin-bottom: 15px;
                }
                .slide-solution h3 {
                    font-size: 1.1rem;
                    margin: 12px 0 8px;
                }
                .slide-solution .content-wrapper {
                    font-size: 0.9rem;
                    line-height: 1.5;
                }
                .slide-solution .hinweis,
                .slide-solution .merke,
                .slide-solution .result,
                .slide-solution .step {
                    font-size: 0.9rem;
                    padding: 10px 12px;
                }
                .slide-solution ol li,
                .slide-solution p,
                .slide-solution ul li {
                    font-size: 0.9rem;
                }
                .slide-solution .formula {
                    padding: 8px 12px;
                    font-size: 0.85rem;
                }
            }
            .slide[data-slide='15'] .step strong {
                font-size: 1.6rem;
            }
            @media (max-width: 1024px) {
                .slide[data-slide='15'] .step strong {
                    font-size: 1rem;
                }
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide[data-slide='15'] .step strong {
                    font-size: 1.2rem;
                }
            }
            .slide[data-slide='15'] .aroma-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 24px;
                margin: 40px 0;
            }
            .slide[data-slide='15'] .aroma-grid .step {
                margin: 0;
                text-align: center;
                padding: 24px;
            }
            .slide[data-slide='15'] .aroma-grid .step p {
                margin: 12px 0 0;
                font-size: 1.3rem;
            }
            @media (max-width: 1024px) {
                .slide[data-slide='15'] .aroma-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 8px;
                    margin: 15px 0;
                }
                .slide[data-slide='15'] .aroma-grid .step {
                    padding: 10px;
                }
                .slide[data-slide='15'] .aroma-grid .step strong {
                    font-size: 1rem !important;
                }
                .slide[data-slide='15'] .aroma-grid .step p {
                    font-size: 0.85rem;
                    margin: 6px 0 0;
                }
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide[data-slide='15'] .aroma-grid {
                    gap: 12px;
                    margin: 20px 0;
                }
                .slide[data-slide='15'] .aroma-grid .step {
                    padding: 14px;
                }
                .slide[data-slide='15'] .aroma-grid .step strong {
                    font-size: 1.3rem !important;
                }
                .slide[data-slide='15'] .aroma-grid .step p {
                    font-size: 1rem;
                    margin: 8px 0 0;
                }
            }
            .slide[data-slide='14'] .compound-info {
                display: flex;
                gap: 20px;
                flex-wrap: wrap;
                margin-top: 16px;
                font-size: 1.1rem;
            }
            .slide[data-slide='14'] .compound-info .compound-card {
                flex: 1;
                min-width: 280px;
                background: #f8fafc;
                border: 1px solid #e2e8f0;
                border-radius: 8px;
                padding: 16px;
            }
            .slide[data-slide='14'] .compound-info .compound-card strong {
                color: #1e40af;
                font-size: 1.2rem;
            }
            .slide[data-slide='14'] .compound-info .compound-card p {
                margin: 8px 0 0;
                color: #555;
                font-size: 1rem;
            }
            .slide[data-slide='14'] .data-source {
                margin-top: 20px;
                font-size: 0.95rem;
                color: #666;
                text-align: right;
                font-style: italic;
            }
            @media (max-width: 1024px) {
                .slide[data-slide='14'] .compound-info {
                    gap: 8px;
                    font-size: 0.85rem;
                }
                .slide[data-slide='14'] .compound-info .compound-card {
                    min-width: 100%;
                    padding: 10px;
                }
                .slide[data-slide='14'] .compound-info .compound-card strong {
                    font-size: 0.95rem;
                }
                .slide[data-slide='14'] .compound-info .compound-card p {
                    font-size: 0.8rem;
                }
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide[data-slide='14'] .compound-info {
                    gap: 12px;
                    font-size: 0.95rem;
                }
                .slide[data-slide='14'] .compound-info .compound-card {
                    min-width: 200px;
                    padding: 12px;
                }
                .slide[data-slide='14'] .compound-info .compound-card strong {
                    font-size: 1rem;
                }
                .slide[data-slide='14'] .compound-info .compound-card p {
                    font-size: 0.85rem;
                }
            }
            .slide[data-slide='12'] .content-wrapper {
                display: flex;
                gap: 60px;
                align-items: center;
                max-width: 1300px;
            }
            .slide[data-slide='12'] .coca-cola-image {
                flex: 0 0 450px;
            }
            .slide[data-slide='12'] .coca-cola-image img {
                width: 100%;
                border-radius: 16px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            }
            @media (max-width: 1024px) {
                .slide[data-slide='12'] .content-wrapper {
                    flex-direction: column;
                    gap: 20px;
                }
                .slide[data-slide='12'] .coca-cola-image {
                    flex: 0 0 auto;
                    max-width: 180px;
                }
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .slide[data-slide='12'] .content-wrapper {
                    gap: 40px;
                }
                .slide[data-slide='12'] .coca-cola-image {
                    flex: 0 0 300px;
                }
            }
            .pres-nav {
                position: fixed;
                bottom: 30px;
                left: 30px;
                display: flex;
                gap: 16px;
                align-items: center;
                background: rgba(0, 0, 0, 0.8);
                padding: 12px 24px;
                border-radius: 30px;
                z-index: 10001;
            }
            .pres-nav button {
                background: 0 0;
                border: none;
                color: #fff;
                font-size: 1.5rem;
                cursor: pointer;
                padding: 8px 16px;
                border-radius: 8px;
                transition: background 0.2s;
            }
            .pres-nav button:hover {
                background: rgba(255, 255, 255, 0.2);
            }
            .pres-nav button:disabled {
                opacity: 0.3;
                cursor: not-allowed;
            }
            .pres-nav .slide-indicator {
                color: #fff;
                font-size: 1rem;
                min-width: 60px;
                text-align: center;
            }
            .pres-nav .exit-btn {
                background: #ef4444;
                margin-left: 20px;
            }
            .pres-nav .exit-btn:hover {
                background: #dc2626;
            }
            @media (max-width: 1024px) {
                .pres-nav {
                    bottom: 15px;
                    left: 50%;
                    transform: translateX(-50%);
                    gap: 10px;
                    padding: 8px 16px;
                }
                .pres-nav button {
                    font-size: 1.2rem;
                    padding: 6px 12px;
                }
                .pres-nav .slide-indicator {
                    font-size: 0.85rem;
                    min-width: 50px;
                }
                .pres-nav .exit-btn {
                    margin-left: 10px;
                }
            }
            @media (max-width: 1200px), (max-height: 800px) {
                .pres-nav {
                    bottom: 20px;
                    gap: 12px;
                    padding: 10px 20px;
                }
                .pres-nav button {
                    font-size: 1.3rem;
                    padding: 6px 14px;
                }
                .pres-nav .slide-indicator {
                    font-size: 0.9rem;
                }
            }
            body.presentation-mode.external-display .pres-nav {
                display: none !important;
            }
        </style>
    </head>
    <body>
        <h1>Massenspektrograf</h1>
        <p class="author-line">von Zensiert (√∂ffentlich)</p>
        <div class="aufgabe">
            <p>
                Die Skizze zeigt einen m√∂glichen Aufbau eines Massenspektrografen. Elektrisches und
                magnetisches Feld haben die gleiche Richtung und stehen senkrecht auf der
                Bewegungsrichtung der geladenen Teilchen.
            </p>
            <div class="teilaufgabe">
                <strong>a)</strong> Beschreiben Sie, in welche Richtung positiv geladene Ionen durch
                das elektrische bzw. das magnetische Feld abgelenkt werden. Wovon ist die Ablenkung
                abh√§ngig?
            </div>
            <div class="teilaufgabe">
                <strong>b)</strong> Welche Aufgabe hat ein Massenspektrograf? Erkl√§ren Sie die
                Wirkungsweise der dargestellten Anordnung.
            </div>
            <div class="teilaufgabe">
                <strong>+</strong> Zeigen Sie, dass die Ionen auf dem Auffangschirm eine Parabelbahn
                beschreiben. Leiten Sie die Formel f√ºr \(m/q\) her.
            </div>
        </div>
        <h2>3D-Simulation</h2>
        <div style="display: flex; gap: 16px; align-items: stretch; flex-wrap: wrap">
            <div id="canvas-container"></div>
            <div id="screen-diagram">
                <canvas id="screenCanvas" width="200" height="200"></canvas>
                <div class="diagram-label">Auffangschirm (y-z Ebene)</div>
            </div>
        </div>
        <div class="sim-controls">
            <button id="toggleEmission">‚ñ∂ Emission starten</button>
            <button id="clearScreen">Schirm leeren</button>
        </div>
        <div class="screen-coords" id="screenCoords">Letzte Auftreffposition: y = --, z = --</div>
        <h3>Parameter</h3>
        <div class="param-grid">
            <div class="param-item">
                <label>Elektrisches Feld E</label>
                <input type="range" id="paramE" min="100" max="10000" value="1000" step="100" />
                <span class="value" id="valueE">1000 V/m</span>
            </div>
            <div class="param-item">
                <label>Magnetisches Feld B</label>
                <input type="range" id="paramB" min="1" max="100" value="10" step="1" />
                <span class="value" id="valueB">10 mT</span>
            </div>
            <div class="param-item">
                <label>Geschwindigkeit v‚ÇÄ (konstant)</label>
                <input type="range" id="paramV" min="10" max="500" value="100" step="10" />
                <span class="value" id="valueV">100 km/s</span>
            </div>
            <div class="param-item">
                <label>Emissionsrate</label>
                <input type="range" id="paramRate" min="50" max="500" value="200" step="25" />
                <span class="value" id="valueRate">5/s</span>
            </div>
            <div class="param-item">
                <label>Simulationsgeschwindigkeit</label>
                <input type="range" id="paramSpeed" min="0.25" max="3" value="1" step="0.25" />
                <span class="value" id="valueSpeed">1√ó</span>
            </div>
        </div>
        <h3>Isotope / Massen</h3>
        <p style="font-size: 0.9rem; color: #666; margin-bottom: 12px">
            W√§hle welche Isotope emittiert werden sollen (alle haben die gleiche Geschwindigkeit):
        </p>
        <div class="isotope-selection" id="isotopeSelection">
            <label class="isotope-checkbox"
                ><input type="checkbox" value="1" checked="checked" data-name="H" />
                <span style="background: #e74c3c">¬πH (1 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="2" checked="checked" data-name="D" />
                <span style="background: #e67e22">¬≤H/D (2 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="12" checked="checked" data-name="C-12" />
                <span style="background: #f1c40f; color: #333">¬π¬≤C (12 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="13" checked="checked" data-name="C-13" />
                <span style="background: #2ecc71">¬π¬≥C (13 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="14" checked="checked" data-name="N" />
                <span style="background: #1abc9c">¬π‚Å¥N (14 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="16" checked="checked" data-name="O" />
                <span style="background: #3498db">¬π‚Å∂O (16 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="32" checked="checked" data-name="S" />
                <span style="background: #9b59b6">¬≥¬≤S (32 u)</span></label
            >
            <label class="isotope-checkbox"
                ><input type="checkbox" value="56" checked="checked" data-name="Fe" />
                <span style="background: #34495e">‚Åµ‚Å∂Fe (56 u)</span></label
            >
        </div>
        <hr />
        <h2>L√∂sung a) Richtungen der Ablenkung und Abh√§ngigkeiten</h2>
        <h3>Die zwei wichtigen Kr√§fte</h3>
        <div class="step">
            <p>
                <span class="step-number">1</span><strong>Elektrische Kraft</strong> auf ein
                Teilchen mit Ladung \(q\):
            </p>
            <div class="formula">$$F_{\text{el}} = q \cdot E$$</div>
            <p>
                Die Richtung ist die gleiche wie die Richtung des elektrischen Feldes \(E\) f√ºr
                positive Ladung (\(q > 0\)).
            </p>
            <p><em>Merke: Das elektrische Feld zeigt immer von + nach ‚àí.</em></p>
        </div>
        <div class="step">
            <p><span class="step-number">2</span><strong>Lorentzkraft</strong>:</p>
            <div class="formula">$$F_{\text{L}} = q \cdot v \cdot B$$</div>
            <p>Die Richtung ergibt sich aus der <strong>Rechte-Hand-Regel</strong>:</p>
            <ul>
                <li>Daumen in Richtung \(v\) (Geschwindigkeit)</li>
                <li>Zeigefinger in Richtung \(B\) (Magnetfeld)</li>
                <li>Mittelfinger zeigt dann in Richtung der Kraft \(F_{\text{L}}\)</li>
            </ul>
        </div>
        <h3>Anwendung auf unsere Anordnung</h3>
        <div class="hinweis">
            <strong>Koordinatensystem:</strong>
            <ul>
                <li>Ionen fliegen in \(+x\)-Richtung (nach rechts): \(v\) in \(x\)-Richtung</li>
                <li>\(E\) zeigt nach oben (\(+y\))</li>
                <li>\(B\) zeigt seitlich (\(-z\), weg vom Betrachter)</li>
            </ul>
        </div>
        <p><strong>Elektrische Kraft auf ein positives Ion:</strong></p>
        <p>\(F_{\text{el}} = q \cdot E\) ‚Üí zeigt in Richtung von \(E\)</p>
        <p><span class="direction dir-up">‚Üë nach oben (+y)</span></p>
        <p><strong>Lorentzkraft:</strong></p>
        <p>
            Mit der Rechte-Hand-Regel: Daumen nach rechts (\(+x\)), Zeigefinger nach hinten
            (\(-z\)), dann zeigt der Mittelfinger nach oben.
        </p>
        <p><span class="direction dir-up">‚Üë nach oben (+y)</span></p>
        <div class="merke">
            <strong>Fazit:</strong> Bei dieser Orientierung wirken beide Kr√§fte in dieselbe Richtung
            (verst√§rkende Ablenkung nach oben).
        </div>
        <h3>Wovon h√§ngt die Ablenkung ab?</h3>
        <div class="result">
            <p><strong>Elektrische Kraft:</strong> \(F_{\text{el}} = q \cdot E\)</p>
            <p>‚Üí proportional zu Ladung \(q\) und Feldst√§rke \(E\)</p>
        </div>
        <div class="result">
            <p><strong>Lorentzkraft:</strong> \(F_{\text{L}} = q \cdot v \cdot B\)</p>
            <p>‚Üí proportional zu Ladung \(q\), Geschwindigkeit \(v\) und Feldst√§rke \(B\)</p>
        </div>
        <div class="merke">
            <strong>Wichtiger Unterschied:</strong> Die Lorentzkraft h√§ngt zus√§tzlich von der
            Geschwindigkeit \(v\) ab ‚Äì die elektrische Kraft nicht!
        </div>
        <h3>Was folgt daraus logisch?</h3>
        <p>
            Wenn geladene Teilchen je nach Eigenschaft unterschiedlich abgelenkt werden, treffen sie
            an <em>unterschiedlichen Orten</em> auf dem Schirm auf. Daraus kann man Informationen
            √ºber diese Eigenschaft gewinnen.
        </p>
        <div class="result">
            <strong>Aufgabe des Massenspektrometers:</strong><br />Es trennt Ionen nach ihrem
            <strong>Masse-zu-Ladung-Verh√§ltnis \(m/q\)</strong> und misst, wie viele Ionen an einem
            bestimmten Ort auftreffen (Intensit√§t).
        </div>
        <div class="hinweis">
            <strong>Reale Anwendung:</strong> In der Praxis haben alle Ionen nach dem
            Geschwindigkeitsfilter die <em>gleiche Geschwindigkeit</em>. Die Trennung erfolgt dann
            nur noch durch die <em>unterschiedlichen Massen</em> (z.B. verschiedene Isotope eines
            Elements wie ¬π¬≤C und ¬π¬≥C). Das ist genau das, was die Simulation oben zeigt!
        </div>
        <h3>Wirkungsweise Schritt f√ºr Schritt</h3>
        <div class="step">
            <p>
                <span class="step-number">1</span><strong>Ionisation:</strong> Neutralteilchen
                werden ionisiert ‚Üí positive Ionen entstehen.
            </p>
        </div>
        <div class="step">
            <p>
                <span class="step-number">2</span><strong>Beschleunigung:</strong> Ionen werden zu
                einem Ionenstrahl geformt und durch elektrische Felder beschleunigt. Sie haben
                dadurch eine Anfangsgeschwindigkeit \(v\).
            </p>
        </div>
        <div class="step">
            <p>
                <span class="step-number">3</span><strong>Geschwindigkeitsfilter:</strong> In einem
                Bereich mit \(E\) und \(B\) werden Ionen, bei denen sich elektrische und
                Lorentzkraft aufheben, nicht abgelenkt. Damit haben
                <strong>alle durchgelassenen Ionen die gleiche Geschwindigkeit</strong> \(v = E/B\).
            </p>
        </div>
        <div class="step">
            <p>
                <span class="step-number">4</span><strong>Massenanalyse:</strong> Die Ionen treten
                in einen Bereich ein, wo sie abgelenkt werden. Da alle die gleiche Geschwindigkeit
                haben, h√§ngt die Ablenkung nur noch von der <strong>Masse</strong> ab:
            </p>
            <ul>
                <li><strong>Leichtere Ionen</strong> (z.B. ¬πH) werden st√§rker abgelenkt</li>
                <li><strong>Schwerere Ionen</strong> (z.B. ‚Åµ‚Å∂Fe) werden weniger abgelenkt</li>
            </ul>
        </div>
        <div class="step">
            <p>
                <span class="step-number">5</span><strong>Detektion:</strong> Auf dem Auffangschirm
                entstehen verschiedene Treffpunkte f√ºr verschiedene Massen. Jede Masse landet an
                einem charakteristischen Ort ‚Üí daraus kann man die Masse bestimmen.
            </p>
        </div>
        <div class="merke">
            <strong>Isotopentrennung:</strong> So kann man z.B. ¬π¬≤C von ¬π¬≥C unterscheiden ‚Äì obwohl
            beide Kohlenstoff sind, haben sie unterschiedliche Massen und landen an verschiedenen
            Stellen auf dem Schirm!
        </div>
        <hr />
        <h2>L√∂sung c) Herleitung der Parabelbahn</h2>
        <div class="hinweis">
            <strong>Situation:</strong> Die Ionen fliegen mit konstanter Geschwindigkeit \(v\) in
            \(x\)-Richtung und treten in ein homogenes elektrisches Feld \(E\) ein, das senkrecht
            zur Flugrichtung (in \(y\)-Richtung) wirkt.
        </div>
        <h3>Gegeben</h3>
        <ul>
            <li>Anfangsgeschwindigkeit: \(v_0\) in \(x\)-Richtung</li>
            <li>Elektrisches Feld: \(E\) in \(y\)-Richtung (konstant, homogen, nach oben)</li>
            <li>Ladung \(q\) und Masse \(m\) des Ions</li>
        </ul>
        <h3>Schritt 1: Kr√§fte und Beschleunigungen</h3>
        <div class="step">
            <p>
                <span class="step-number">1</span><strong>Vertikale Kraft (\(y\)-Richtung):</strong>
            </p>
            <p>
                Aus der Elektrodynamik wissen wir: Die Kraft auf eine Ladung im elektrischen Feld
                ist:
            </p>
            <div class="formula">$$F = q \cdot E$$</div>
            <p>In unserem Fall wirkt das E-Feld in \(y\)-Richtung, also:</p>
            <div class="formula">$$F_y = q \cdot E$$</div>
        </div>
        <div class="step">
            <p>
                <span class="step-number">2</span
                ><strong>Beschleunigung aus der Kraft (Newton):</strong>
            </p>
            <p>Nach Newtons 2. Gesetz gilt allgemein:</p>
            <div class="formula">$$F = m \cdot a \quad \Rightarrow \quad a = \frac{F}{m}$$</div>
            <p>Einsetzen der elektrischen Kraft \(F_y = q \cdot E\):</p>
            <div class="formula">$$a_y = \frac{F_y}{m} = \frac{q \cdot E}{m}$$</div>
        </div>
        <div class="step">
            <p>
                <span class="step-number">3</span
                ><strong>Horizontale Beschleunigung (\(x\)-Richtung):</strong>
            </p>
            <p>Keine Kraft in \(x\)-Richtung ‚Üí \(a_x = 0\) ‚Üí \(v_x(t) = v\) bleibt konstant!</p>
        </div>
        <h3>Schritt 2: Bewegungsgleichungen</h3>
        <p>
            Die allgemeinen kinematischen Gleichungen f√ºr gleichm√§√üig beschleunigte Bewegung lauten:
        </p>
        <div class="formula">$$s(t) = s_0 + v_0 \cdot t + \frac{1}{2} \cdot a \cdot t^2$$</div>
        <p>Start bei \(x = 0\), \(y = 0\) zur Zeit \(t = 0\):</p>
        <p><strong>In \(x\)-Richtung</strong> (keine Beschleunigung, \(a_x = 0\)):</p>
        <div class="formula">$$x(t) = v \cdot t$$</div>
        <p>
            <strong>In \(y\)-Richtung</strong> (Anfangsgeschwindigkeit \(v_{y,0} = 0\), konstante
            Beschleunigung \(a_y\)):
        </p>
        <div class="formula">$$y(t) = \frac{1}{2} \cdot a_y \cdot t^2$$</div>
        <p>Einsetzen von \(a_y = \frac{q \cdot E}{m}\):</p>
        <div class="formula">$$y(t) = \frac{1}{2} \cdot \frac{q \cdot E}{m} \cdot t^2$$</div>
        <h3>Schritt 3: Zeit eliminieren</h3>
        <p>Aus der ersten Gleichung: \(t = \frac{x}{v}\)</p>
        <p>Einsetzen in die zweite Gleichung:</p>
        <div class="formula">
            $$y(x) = \frac{1}{2} \cdot \frac{q \cdot E}{m} \cdot \left(\frac{x}{v}\right)^2 =
            \frac{q \cdot E}{2 \cdot m \cdot v^2} \cdot x^2$$
        </div>
        <div class="result">
            <strong>Parabelgleichung:</strong> $$\boxed{y(x) = \frac{q \cdot E}{2 \cdot m \cdot v^2}
            \cdot x^2}$$
        </div>
        <div class="hinweis">
            <strong>Warum ist das eine Parabel?</strong>
            <p>
                Die allgemeine Form einer Parabel lautet: \(y = a \cdot x^2\), wobei \(a\) eine
                Konstante ist.
            </p>
            <p>In unserer Gleichung ist:</p>
            <div class="formula">$$a = \frac{q \cdot E}{2 \cdot m \cdot v^2} = \text{const.}$$</div>
            <p>
                Da \(q\), \(E\), \(m\) und \(v\) f√ºr ein bestimmtes Ion alle konstant sind, ist der
                gesamte Vorfaktor eine feste Zahl. Die Ablenkung \(y\) w√§chst also
                <strong>quadratisch</strong> mit der zur√ºckgelegten Strecke \(x\).
            </p>
            <ul>
                <li>Bei \(x = 1\): \(y = a \cdot 1 = a\)</li>
                <li>Bei \(x = 2\): \(y = a \cdot 4 = 4a\) (4-fache Ablenkung!)</li>
                <li>Bei \(x = 3\): \(y = a \cdot 9 = 9a\) (9-fache Ablenkung!)</li>
            </ul>
            <p>
                Das \(x^2\) im Z√§hler sorgt daf√ºr, dass die Kurve immer st√§rker nach oben gekr√ºmmt
                wird ‚Äì typisch f√ºr eine Parabel.
            </p>
        </div>
        <h3>Was bedeutet das physikalisch?</h3>
        <div class="merke">
            <strong>Abh√§ngigkeiten der Parabelkr√ºmmung:</strong>
            <ul>
                <li>
                    <strong>Gr√∂√üere Masse \(m\):</strong> flachere Parabel (kleinere Ablenkung) ‚Üí
                    schwerere Ionen landen n√§her am Ursprung
                </li>
                <li><strong>Gr√∂√üere Ladung \(q\):</strong> steilere Parabel (gr√∂√üere Ablenkung)</li>
                <li><strong>Gr√∂√üeres Feld \(E\):</strong> steilere Parabel (gr√∂√üere Ablenkung)</li>
                <li>
                    <strong>H√∂here Geschwindigkeit \(v\):</strong> flachere Parabel (k√ºrzere
                    Verweildauer im Feld)
                </li>
            </ul>
        </div>
        <div class="hinweis">
            <strong>In der Simulation:</strong> Da alle Ionen die gleiche Geschwindigkeit haben,
            liegen die Auftreffpunkte verschiedener Massen auf einer Geraden durch den Ursprung ‚Äì
            nicht auf einer Parabel! Die Parabel entsteht nur, wenn man <em>eine</em> Masse mit
            <em>verschiedenen Geschwindigkeiten</em> betrachtet.
        </div>
        <h3>Intuitive Pr√ºfung</h3>
        <ul>
            <li>
                Verdoppelt sich die Masse \(m\) (bei gleicher Ladung), wird die Ablenkung halb so
                gro√ü ‚Üí schwerere Ionen treffen ‚Äûtiefer" (kleineres \(y\)).
            </li>
            <li>
                Verdoppelt sich die Ladung \(q\) (gleiche \(m\)), wird die Ablenkung doppelt so
                gro√ü.
            </li>
            <li>
                H√∂here Geschwindigkeit \(v\) ‚Üí k√ºrzere Verweildauer im Feld ‚Üí geringere Ablenkung
                (proportional zu \(1/v^2\)).
            </li>
        </ul>
        <hr />
        <h2>Berechnete Werte (f√ºr ¬π¬≤C)</h2>
        <div class="calc-result" id="calcResults">
            <p><strong>y-Ablenkung:</strong> <span id="calcY">--</span> mm</p>
            <p><strong>z-Ablenkung:</strong> <span id="calcZ">--</span> mm</p>
            <p><strong>Parabelkonstante C:</strong> <span id="calcC">--</span></p>
            <p><strong>Pr√ºfung z¬≤ = C¬∑y:</strong> <span id="calcCheck">--</span></p>
        </div>
        <h3>Massenbestimmung aus Messwerten</h3>
        <div class="measure-inputs">
            <label>y (mm): <input type="number" id="measY" value="5" step="0.1" /></label>
            <label>z (mm): <input type="number" id="measZ" value="10" step="0.1" /></label>
        </div>
        <div class="calc-result" id="massResult">
            <p><strong>Berechnetes m/q:</strong> <span id="calcMQ">--</span> kg/C</p>
            <p><strong>Masse (bei q = e):</strong> <span id="calcMass">--</span> u</p>
        </div>
        <button class="presentation-btn" id="startPresentation">üìΩ Pr√§sentation starten</button>
        <div class="presentation-overlay" id="presentationOverlay">
            <div class="slide slide-title active" data-slide="1">
                <div class="title-content">
                    <h1>Massenspektrograf</h1>
                    <p class="author">von Zensiert (√∂ffentlich)</p>
                </div>
                <div class="qr-container">
                    <img id="qrImage" alt="QR Code" />
                    <p class="qr-label">Seite √∂ffnen</p>
                </div>
            </div>
            <div class="slide slide-task" data-slide="2">
                <div class="task-content">
                    <p>
                        Die Skizze zeigt einen m√∂glichen Aufbau eines Massenspektrografen.
                        Elektrisches und magnetisches Feld haben die gleiche Richtung und stehen
                        senkrecht auf der Bewegungsrichtung der geladenen Teilchen.
                    </p>
                    <div class="teilaufgabe">
                        <strong>a)</strong> Beschreiben Sie, in welche Richtung positiv geladene
                        Ionen durch das elektrische bzw. das magnetische Feld abgelenkt werden.
                        Wovon ist die Ablenkung abh√§ngig?
                    </div>
                    <div class="teilaufgabe">
                        <strong>b)</strong> Welche Aufgabe hat ein Massenspektrograf? Erkl√§ren Sie
                        die Wirkungsweise der dargestellten Anordnung.
                    </div>
                    <div class="teilaufgabe">
                        <strong>c)</strong> Zeigen Sie, dass die Ionen auf dem Auffangschirm eine
                        Parabelbahn beschreiben. Leiten Sie die Formel f√ºr m/q her.
                    </div>
                </div>
            </div>
            <div class="slide slide-simulation" data-slide="3">
                <h2>3D-Simulation</h2>
                <div class="sim-wrapper">
                    <div id="pres-canvas-container"></div>
                    <div id="pres-screen-diagram">
                        <canvas id="presScreenCanvas" width="240" height="240"></canvas>
                        <div class="diagram-label">Auffangschirm (y-z Ebene)</div>
                    </div>
                </div>
                <div class="sim-controls-pres">
                    <button id="presToggleEmission">‚ñ∂ Emission starten</button>
                    <button id="presClearScreen">Schirm leeren</button>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="4">
                <div class="content-wrapper">
                    <h2>L√∂sung a) Die zwei wichtigen Kr√§fte</h2>
                    <div class="step">
                        <p>
                            <span class="step-number">1</span><strong>Elektrische Kraft</strong> auf
                            Teilchen mit Ladung \(q\)
                        </p>
                        <div class="formula">$$F_{\text{el}} = q \cdot E$$</div>
                        <p>Richtung = Richtung des E-Feldes (f√ºr \(q > 0\))</p>
                        <p><em>E-Feld zeigt immer von + nach ‚àí</em></p>
                    </div>
                    <div class="step">
                        <p><span class="step-number">2</span><strong>Lorentzkraft</strong></p>
                        <div class="formula">$$F_{\text{L}} = q \cdot v \cdot B$$</div>
                        <p>Richtung aus <strong>Rechte-Hand-Regel</strong></p>
                        <ul>
                            <li>Daumen ‚Üí \(v\) (Geschwindigkeit)</li>
                            <li>Zeigefinger ‚Üí \(B\) (Magnetfeld)</li>
                            <li>Mittelfinger ‚Üí \(F_{\text{L}}\) (Kraft)</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="5">
                <div class="content-wrapper">
                    <h2>L√∂sung a) Anwendung auf unsere Anordnung</h2>
                    <div class="hinweis">
                        <strong>Koordinatensystem</strong>
                        <ul>
                            <li>Ionen fliegen in \(+x\)-Richtung ‚Üí \(v\) in \(x\)</li>
                            <li>\(E\) zeigt nach oben (\(+y\))</li>
                            <li>\(B\) zeigt seitlich (\(-z\), weg vom Betrachter)</li>
                        </ul>
                    </div>
                    <p><strong>Elektrische Kraft auf positives Ion</strong></p>
                    <p>\(F_{\text{el}} = q \cdot E\) ‚Üí Richtung von \(E\)</p>
                    <p><span class="direction dir-up">‚Üë nach oben (+y)</span></p>
                    <p><strong>Lorentzkraft</strong></p>
                    <p>
                        Rechte-Hand-Regel: Daumen ‚Üí \(+x\), Zeigefinger ‚Üí \(-z\), Mittelfinger ‚Üí
                        oben
                    </p>
                    <p><span class="direction dir-up">‚Üë nach oben (+y)</span></p>
                    <div class="merke">
                        <strong>Fazit:</strong> Beide Kr√§fte in dieselbe Richtung ‚Üí verst√§rkende
                        Ablenkung nach oben
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="6">
                <div class="content-wrapper">
                    <h2>L√∂sung a) Abh√§ngigkeiten der Ablenkung</h2>
                    <div class="result">
                        <p><strong>Elektrische Kraft:</strong> \(F_{\text{el}} = q \cdot E\)</p>
                        <p>‚Üí proportional zu \(q\) und \(E\)</p>
                    </div>
                    <div class="result">
                        <p><strong>Lorentzkraft:</strong> \(F_{\text{L}} = q \cdot v \cdot B\)</p>
                        <p>‚Üí proportional zu \(q\), \(v\) und \(B\)</p>
                    </div>
                    <div class="merke">
                        <strong>Wichtiger Unterschied:</strong> Lorentzkraft h√§ngt zus√§tzlich von
                        \(v\) ab ‚Äì elektrische Kraft nicht
                    </div>
                    <h3>Geschwindigkeitsfilter</h3>
                    <p>
                        \(E\) und \(B\) so angeordnet, dass \(F_{\text{el}}\) und \(F_{\text{L}}\)
                        entgegengesetzt wirken ‚Üí nur Ionen mit bestimmter Geschwindigkeit passieren
                        geradeaus
                    </p>
                    <div class="formula">
                        $$q \cdot E = q \cdot v \cdot B \quad \Rightarrow \quad v = \frac{E}{B}$$
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="7">
                <div class="content-wrapper">
                    <h2>L√∂sung b) Aufgabe des Massenspektrografen</h2>
                    <h3>Aufbau</h3>
                    <ol>
                        <li><strong>Ionenquelle:</strong> Proben ionisiert ‚Üí geladene Teilchen</li>
                        <li>
                            <strong>Feldgebiet:</strong> Plattenkondensator + Magnetfeld
                            beeinflussen Ionen
                        </li>
                        <li><strong>Auffangschirm/Detektor:</strong> Auftreffpunkt der Ionen</li>
                    </ol>
                    <h3>Logische Folgerung</h3>
                    <p>
                        Unterschiedliche Ablenkung je nach Eigenschaft ‚Üí unterschiedliche
                        Auftreffpunkte ‚Üí Information √ºber Eigenschaft
                    </p>
                    <div class="result">
                        <strong>Aufgabe:</strong> Trennung nach <strong>\(m/q\)</strong> + Messung
                        der Intensit√§t (Anzahl Ionen pro Ort)
                    </div>
                    <div class="hinweis">
                        <strong>Praxis:</strong> Nach Geschwindigkeitsfilter alle Ionen mit gleicher
                        \(v\) ‚Üí Trennung nur durch unterschiedliche Massen (z.B. ¬π¬≤C vs ¬π¬≥C)
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="8">
                <div class="content-wrapper">
                    <h2>L√∂sung b) Wirkungsweise Schritt f√ºr Schritt</h2>
                    <div class="step">
                        <p>
                            <span class="step-number">1</span
                            ><strong>Ionisation:</strong> Neutralteilchen ‚Üí positive Ionen
                        </p>
                    </div>
                    <div class="step">
                        <p>
                            <span class="step-number">2</span
                            ><strong>Beschleunigung:</strong> Ionenstrahl geformt, durch E-Feld
                            beschleunigt ‚Üí Anfangsgeschwindigkeit \(v\)
                        </p>
                    </div>
                    <div class="step">
                        <p>
                            <span class="step-number">3</span>
                            <strong>Geschwindigkeitsfilter:</strong> \(F_{\text{el}}\) und
                            \(F_{\text{L}}\) heben sich auf ‚Üí
                            <strong>alle durchgelassenen Ionen mit gleicher Geschwindigkeit</strong>
                            \(v = E/B\)
                        </p>
                    </div>
                    <div class="step">
                        <p>
                            <span class="step-number">4</span
                            ><strong>Massenanalyse:</strong> Gleiche \(v\) ‚Üí Ablenkung nur von
                            <strong>Masse</strong> abh√§ngig
                        </p>
                        <ul>
                            <li>Leicht (¬πH) ‚Üí stark abgelenkt</li>
                            <li>Schwer (‚Åµ‚Å∂Fe) ‚Üí wenig abgelenkt</li>
                        </ul>
                    </div>
                    <div class="step">
                        <p>
                            <span class="step-number">5</span
                            ><strong>Detektion:</strong> Verschiedene Massen ‚Üí verschiedene
                            Treffpunkte ‚Üí Massenbestimmung
                        </p>
                    </div>
                    <div class="merke">
                        <strong>Isotopentrennung:</strong> ¬π¬≤C vs ¬π¬≥C ‚Äì gleicher Stoff,
                        unterschiedliche Masse ‚Üí verschiedene Positionen auf Schirm
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="9">
                <div class="content-wrapper">
                    <h2>L√∂sung c) Herleitung der Parabelbahn</h2>
                    <div class="hinweis" style="padding: 12px; margin: 12px 0">
                        <strong>Gegeben:</strong> \(v_0\) in \(x\), E-Feld in \(y\), Ladung \(q\),
                        Masse \(m\)
                    </div>
                    <div style="display: flex; gap: 16px; flex-wrap: wrap">
                        <div
                            class="step"
                            style="flex: 1; min-width: 300px; padding: 12px; margin: 8px 0"
                        >
                            <p>
                                <span class="step-number">1</span>
                                <strong>Elektrische Kraft:</strong> \(F = q \cdot E\)
                            </p>
                            <div class="formula" style="padding: 8px; margin: 8px 0">
                                $$F_y = q \cdot E$$
                            </div>
                        </div>
                        <div
                            class="step"
                            style="flex: 1; min-width: 300px; padding: 12px; margin: 8px 0"
                        >
                            <p>
                                <span class="step-number">2</span> <strong>Newton:</strong> \(F = m
                                \cdot a\) ‚Üí \(a = F/m\)
                            </p>
                            <div class="formula" style="padding: 8px; margin: 8px 0">
                                $$a_y = \frac{q \cdot E}{m}$$
                            </div>
                        </div>
                    </div>
                    <div class="step" style="padding: 10px; margin: 8px 0">
                        <p>
                            <span class="step-number">3</span><strong>Horizontal:</strong> Keine
                            Kraft ‚Üí \(a_x = 0\) ‚Üí \(v_x = v\) konstant
                        </p>
                    </div>
                    <h3 style="margin: 12px 0 8px">Bewegungsgleichungen</h3>
                    <p style="margin: 4px 0; font-size: 0.95rem">
                        Kinematik: \(s(t) = v_0 \cdot t + \frac{1}{2} a t^2\)
                    </p>
                    <div style="display: flex; gap: 16px; flex-wrap: wrap">
                        <div
                            class="formula"
                            style="flex: 1; min-width: 180px; padding: 8px; margin: 4px 0"
                        >
                            $$x(t) = v \cdot t$$ <small>(\(a_x = 0\))</small>
                        </div>
                        <div
                            class="formula"
                            style="flex: 1; min-width: 220px; padding: 8px; margin: 4px 0"
                        >
                            $$y(t) = \frac{1}{2} \cdot a_y \cdot t^2 = \frac{1}{2} \cdot \frac{q
                            \cdot E}{m} \cdot t^2$$
                            <small>(\(v_{y,0} = 0\), \(a_y = \frac{qE}{m}\))</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="10">
                <div class="content-wrapper">
                    <h2>L√∂sung c) Parabelgleichung</h2>
                    <h3>Zeit eliminieren</h3>
                    <p>Aus \(x(t) = v \cdot t\) ‚Üí \(t = \frac{x}{v}\) ‚Üí einsetzen in \(y(t)\)</p>
                    <div class="formula">
                        $$y(x) = \frac{1}{2} \cdot \frac{q \cdot E}{m} \cdot
                        \left(\frac{x}{v}\right)^2 = \frac{q \cdot E}{2 \cdot m \cdot v^2} \cdot
                        x^2$$
                    </div>
                    <div class="result">
                        <strong>Ergebnis:</strong> $$\boxed{y(x) = \frac{q \cdot E}{2 \cdot m \cdot
                        v^2} \cdot x^2}$$
                    </div>
                    <div class="hinweis">
                        <strong>Parabelform \(y = a \cdot x^2\)</strong> mit \(a = \frac{q \cdot
                        E}{2 \cdot m \cdot v^2}\) = const
                        <p style="margin-top: 8px">
                            ‚Üí Doppelte Strecke = 4-fache Ablenkung (quadratisches Wachstum)
                        </p>
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="11">
                <div class="content-wrapper">
                    <h2>L√∂sung c) Physikalische Bedeutung</h2>
                    <div class="merke">
                        <strong>Abh√§ngigkeiten der Parabelkr√ºmmung</strong>
                        <ul>
                            <li>
                                <strong>Gr√∂√üere Masse \(m\)</strong> ‚Üí flachere Parabel ‚Üí schwerere
                                Ionen n√§her am Ursprung
                            </li>
                            <li><strong>Gr√∂√üere Ladung \(q\)</strong> ‚Üí steilere Parabel</li>
                            <li><strong>Gr√∂√üeres Feld \(E\)</strong> ‚Üí steilere Parabel</li>
                            <li>
                                <strong>H√∂here Geschwindigkeit \(v\)</strong> ‚Üí flachere Parabel
                                (k√ºrzere Verweildauer)
                            </li>
                        </ul>
                    </div>
                    <div class="hinweis">
                        <strong>In der Simulation:</strong> Alle Ionen mit gleicher \(v\) ‚Üí
                        Auftreffpunkte auf Geraden durch Ursprung (nicht Parabel) ‚Äì Parabel nur bei
                        einer Masse mit verschiedenen \(v\)
                    </div>
                    <h3>Intuitive Pr√ºfung</h3>
                    <ul>
                        <li>Doppelte Masse \(m\) ‚Üí halbe Ablenkung ‚Üí kleineres \(y\)</li>
                        <li>Doppelte Ladung \(q\) ‚Üí doppelte Ablenkung</li>
                        <li>
                            H√∂here \(v\) ‚Üí k√ºrzere Verweildauer ‚Üí geringere Ablenkung (\(\propto
                            1/v^2\))
                        </li>
                    </ul>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="12">
                <div class="content-wrapper">
                    <div style="flex: 1">
                        <h2 style="margin-top: 0">Praxisbeispiel: Coca-Cola</h2>
                        <div class="hinweis" style="margin-top: 24px">
                            <strong>Problem</strong>
                            <ul style="margin: 12px 0 0 20px">
                                <li>Genaue Rezeptur = Gesch√§ftsgeheimnis</li>
                                <li>Aromastoffe in sehr kleinen Mengen</li>
                                <li>Chemisch √§hnlich aufgebaut</li>
                            </ul>
                        </div>
                        <div class="result" style="margin-top: 20px">
                            <strong>L√∂sung:</strong> Massenspektrometrie
                            <p style="margin: 8px 0 0">‚Üí Identifikation √ºber \(m/q\)</p>
                        </div>
                    </div>
                    <div class="coca-cola-image">
                        <img
                            src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftoppng.com%2Fuploads%2Fpreview%2Fcoke-glass-bottle-png-vector-coca-cola-cans-transparent-11563242311toxwyoqe0h.png&f=1&nofb=1&ipt=a82abb5fc0745fcdb635a2fd9a70fe5e8804287b60deecd755432502b84d2f02"
                            alt="Coca-Cola"
                        />
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="13">
                <div class="content-wrapper">
                    <h2>Analyseverfahren</h2>
                    <div class="step">
                        <p><span class="step-number">1</span><strong>Ionisation</strong></p>
                        <p>Probe ‚Üí geladene Teilchen (Ionen)</p>
                    </div>
                    <div class="step">
                        <p><span class="step-number">2</span> <strong>Trennung im Feld</strong></p>
                        <p>Ablenkung abh√§ngig von \(\frac{m}{q}\)</p>
                        <p>Leicht ‚Üí stark abgelenkt | Schwer ‚Üí wenig abgelenkt</p>
                    </div>
                    <div class="step">
                        <p><span class="step-number">3</span><strong>Detektion</strong></p>
                        <p>
                            Jede Masse ‚Üí charakteristische Position ‚Üí
                            <strong>Massenspektrum</strong>
                        </p>
                    </div>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="14">
                <div class="content-wrapper" style="max-width: 1200px">
                    <h2>Massenspektrum</h2>
                    <div
                        style="
                            background: #fafafa;
                            border-radius: 12px;
                            padding: 20px;
                            margin: 20px 0;
                        "
                    >
                        <canvas
                            id="spectrumChart"
                            width="1000"
                            height="340"
                            style="width: 100%; max-height: 340px"
                        ></canvas>
                    </div>
                    <div class="compound-info">
                        <div class="compound-card">
                            <strong>üå∏ Œ±-Terpineol</strong> (100% Base Peak)
                            <p>
                                Nat√ºrlicher Alkohol aus √§therischen √ñlen ‚Äì blumig-frischer Duft ‚Äì in
                                Flieder und Eukalyptus
                            </p>
                        </div>
                        <div class="compound-card">
                            <strong>üå≤ Eucalyptol</strong> (Moderat)
                            <p>
                                = 1,8-Cineol ‚Äì Hauptbestandteil Eukalyptus√∂l ‚Äì k√ºhlend, frisch ‚Äì
                                charakteristische Cola-Frische
                            </p>
                        </div>
                        <div class="compound-card">
                            <strong>üçã Limonen</strong> (Zitrus)
                            <p>
                                Terpen aus Zitrusfr√ºchten ‚Äì zitrusartiger Geschmack ‚Äì nat√ºrlich in
                                Orangen-/Zitronenschalen
                            </p>
                        </div>
                    </div>
                    <p class="data-source">Datenquelle: LabCoatz</p>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="15">
                <div class="content-wrapper">
                    <h2>Nachgewiesene Aromastoffe</h2>
                    <div class="aroma-grid">
                        <div class="step">
                            <strong style="color: #f59e0b; font-size: 1.8rem">üçã Limonen</strong>
                            <p>Zitrus</p>
                        </div>
                        <div class="step">
                            <strong style="color: #b45309; font-size: 1.8rem"
                                >üåø Cinnamaldehyd</strong
                            >
                            <p>Zimt</p>
                        </div>
                        <div class="step">
                            <strong style="color: #059669; font-size: 1.8rem"
                                >üå∏ Œ±-Terpineol</strong
                            >
                            <p>Blumig</p>
                        </div>
                        <div class="step">
                            <strong style="color: #7c3aed; font-size: 1.8rem">üç¶ Vanillin</strong>
                            <p>Vanille</p>
                        </div>
                        <div class="step">
                            <strong style="color: #dc2626; font-size: 1.8rem">üç¨ 5-HMF</strong>
                            <p>Karamell</p>
                        </div>
                        <div class="step">
                            <strong style="color: #0891b2; font-size: 1.8rem">üå≤ Eucalyptol</strong>
                            <p>Frisch</p>
                        </div>
                    </div>
                    <div
                        class="merke"
                        style="margin-top: 30px; font-size: 1.3rem; padding: 20px 24px"
                    >
                        <strong>Peak-H√∂he = Stoffmenge</strong> ‚Üí Quantitative Analyse m√∂glich
                    </div>
                    <p
                        style="
                            margin-top: 20px;
                            font-size: 0.95rem;
                            color: #666;
                            text-align: right;
                            font-style: italic;
                        "
                    >
                        Datenquelle: LabCoatz
                    </p>
                </div>
            </div>
            <div class="slide slide-solution" data-slide="16">
                <div class="content-wrapper">
                    <h2>Fazit</h2>
                    <div class="result" style="margin: 30px 0">
                        <strong>Theorie ‚Üí Praxis</strong>
                        <div class="formula" style="background: 0 0; border: none; padding: 12px 0">
                            $$y = \frac{q \cdot E}{2 \cdot m \cdot v^2} \cdot x^2$$
                        </div>
                        <p>Verschiedene \(m\) ‚Üí verschiedene \(y\) ‚Üí verschiedene Peaks</p>
                    </div>
                    <div class="merke">
                        <strong>Massenspektrometrie erm√∂glicht</strong>
                        <ul style="margin: 12px 0 0 20px">
                            <li>Identifikation unbekannter Stoffe</li>
                            <li>Analyse komplexer Gemische</li>
                            <li>Anwendung: Chemie, Lebensmittel, Forensik</li>
                        </ul>
                    </div>
                    <p style="margin-top: 60px; text-align: center; font-size: 2rem; color: #666">
                        Vielen Dank f√ºrs Zuh√∂ren
                    </p>
                </div>
            </div>
            <div class="pres-nav">
                <button id="prevSlide" title="Vorherige Folie (‚Üê)">‚Äπ</button>
                <span class="slide-indicator"
                    ><span id="currentSlide">1</span> / <span id="totalSlides">16</span> </span
                ><button id="nextSlide" title="N√§chste Folie (‚Üí oder Leertaste)">‚Ä∫</button>
                <button class="exit-btn" id="exitPresentation" title="Beenden (Esc)">‚úï</button>
            </div>
        </div>
        <script type="importmap">
            {
                "imports": {
                    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                    "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
                }
            }
        </script>
        <script type="module">
            import * as THREE from 'three';
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
            const e = 1602e-22,
                u = 1661e-30,
                ISOTOPES = {
                    1: { name: 'H', color: 15158332 },
                    2: { name: 'D', color: 15105570 },
                    12: { name: 'C-12', color: 15844367 },
                    13: { name: 'C-13', color: 3066993 },
                    14: { name: 'N', color: 1752220 },
                    16: { name: 'O', color: 3447003 },
                    32: { name: 'S', color: 10181046 },
                    56: { name: 'Fe', color: 3426654 },
                };
            let params = {
                E: 1e3,
                B: 0.01,
                l: 0.05,
                L: 0.2,
                v0: 1e5,
                q: e,
                emissionRate: 200,
                simSpeed: 1,
                selectedIsotopes: [1, 2, 12, 13, 14, 16, 32, 56],
            };
            const container = document.getElementById('canvas-container'),
                scene = new THREE.Scene();
            scene.background = new THREE.Color(16777215);
            const camera = new THREE.PerspectiveCamera(
                50,
                container.clientWidth / container.clientHeight,
                0.1,
                1e3
            );
            camera.position.set(0, 0, 6.5);
            const renderer = new THREE.WebGLRenderer({ antialias: !0 });
            (renderer.setSize(container.clientWidth, container.clientHeight),
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)),
                container.appendChild(renderer.domElement));
            const controls = new OrbitControls(camera, renderer.domElement);
            ((controls.enableDamping = !0),
                (controls.dampingFactor = 0.05),
                (controls.enableRotate = !1),
                (controls.enablePan = !1),
                (controls.enableZoom = !1),
                scene.add(new THREE.AmbientLight(16777215, 0.7)));
            const dirLight = new THREE.DirectionalLight(16777215, 0.8);
            function createTextSprite(e, t, n = 0.7) {
                const s = document.createElement('canvas'),
                    r = s.getContext('2d');
                ((s.width = 256),
                    (s.height = 256),
                    (r.font = 'bold 160px Arial'),
                    (r.fillStyle = t),
                    (r.textAlign = 'center'),
                    (r.textBaseline = 'middle'),
                    r.fillText(e, 128, 128));
                const i = new THREE.CanvasTexture(s),
                    a = new THREE.Sprite(new THREE.SpriteMaterial({ map: i }));
                return (a.scale.set(n, n, 1), a);
            }
            function createLabel(e, t, n = 0.55) {
                const s = document.createElement('canvas'),
                    r = s.getContext('2d');
                ((s.width = 512),
                    (s.height = 128),
                    (r.font = '600 64px Segoe UI, Arial'),
                    (r.fillStyle = '#222'),
                    (r.textAlign = 'center'),
                    (r.textBaseline = 'middle'),
                    r.fillText(e, 256, 64));
                const i = new THREE.CanvasTexture(s),
                    a = new THREE.Sprite(new THREE.SpriteMaterial({ map: i }));
                return (a.position.copy(t), a.scale.set(5 * n, 1.2 * n, 1), a);
            }
            (dirLight.position.set(5, 10, 7), scene.add(dirLight));
            const FIELD_START_X = -1.5,
                FIELD_END_X = 1,
                FIELD_LENGTH = 2.5,
                SCREEN_X = 4,
                ION_START_X = -3.5,
                ionSource = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.3, 0.3, 1.2, 32),
                    new THREE.MeshStandardMaterial({
                        color: 5592405,
                        metalness: 0.6,
                        roughness: 0.4,
                    })
                );
            ((ionSource.rotation.z = Math.PI / 2),
                ionSource.position.set(-4, 0, 0),
                scene.add(ionSource));
            const fieldGroup = new THREE.Group(),
                topPlate = new THREE.Mesh(
                    new THREE.BoxGeometry(2.5, 0.25, 1.6),
                    new THREE.MeshStandardMaterial({ color: 2600544 })
                );
            ((topPlate.position.y = 1), fieldGroup.add(topPlate));
            const bottomPlate = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 0.25, 1.6),
                new THREE.MeshStandardMaterial({ color: 15158332 })
            );
            ((bottomPlate.position.y = -1), fieldGroup.add(bottomPlate));
            const fieldVolume = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 1.5, 1.6),
                new THREE.MeshStandardMaterial({ color: 14599328, transparent: !0, opacity: 0.15 })
            );
            fieldGroup.add(fieldVolume);
            const minus1 = createTextSprite('‚àí', '#fff', 0.6);
            (minus1.position.set(-0.8, 1, 0.9), fieldGroup.add(minus1));
            const minus2 = createTextSprite('‚àí', '#fff', 0.6);
            (minus2.position.set(0.8, 1, 0.9), fieldGroup.add(minus2));
            const plus1 = createTextSprite('+', '#fff', 0.6);
            (plus1.position.set(-0.8, -1, 0.9), fieldGroup.add(plus1));
            const plus2 = createTextSprite('+', '#fff', 0.6);
            (plus2.position.set(0.8, -1, 0.9), fieldGroup.add(plus2));
            const nLabel = createTextSprite('N', '#fff', 0.65);
            (nLabel.position.set(0, -0.4, 0.9), fieldGroup.add(nLabel));
            const sLabel = createTextSprite('S', '#fff', 0.65);
            (sLabel.position.set(0, 0.4, 0.9),
                fieldGroup.add(sLabel),
                (fieldGroup.position.x = -0.25),
                scene.add(fieldGroup));
            const screen = new THREE.Mesh(
                new THREE.BoxGeometry(0.06, 3, 2.2),
                new THREE.MeshStandardMaterial({ color: 15790320 })
            );
            (screen.position.set(4, 0, 0), scene.add(screen));
            const screenBorder = new THREE.LineSegments(
                new THREE.EdgesGeometry(screen.geometry),
                new THREE.LineBasicMaterial({ color: 2457 })
            );
            function createAxis(e, t, n) {
                const s = new THREE.BufferGeometry().setFromPoints([
                    new THREE.Vector3(...e),
                    new THREE.Vector3(...t),
                ]);
                return new THREE.Line(s, new THREE.LineBasicMaterial({ color: n }));
            }
            (screenBorder.position.copy(screen.position), scene.add(screenBorder));
            const axisX = 3.95;
            (scene.add(createAxis([3.95, 0, 0], [5.45, 0, 0], 0)),
                scene.add(createAxis([3.95, 0, 0], [3.95, 1.5, 0], 0)),
                scene.add(createAxis([3.95, 0, 0], [3.95, 0, 1.2], 0)));
            const arrowGeo = new THREE.ConeGeometry(0.06, 0.15, 8),
                arrowMat = new THREE.MeshBasicMaterial({ color: 0 }),
                xArrow = new THREE.Mesh(arrowGeo, arrowMat);
            ((xArrow.rotation.z = -Math.PI / 2),
                xArrow.position.set(5.45, 0, 0),
                scene.add(xArrow));
            const yArrow = new THREE.Mesh(arrowGeo.clone(), arrowMat);
            (yArrow.position.set(3.95, 1.5, 0), scene.add(yArrow));
            const zArrow = new THREE.Mesh(arrowGeo.clone(), arrowMat);
            ((zArrow.rotation.x = Math.PI / 2),
                zArrow.position.set(3.95, 0, 1.2),
                scene.add(zArrow),
                scene.add(createLabel('x', new THREE.Vector3(5.65, 0, 0), 0.4)),
                scene.add(createLabel('y', new THREE.Vector3(3.95, 1.7, 0), 0.4)),
                scene.add(createLabel('z', new THREE.Vector3(3.95, 0, 1.4), 0.4)),
                scene.add(createLabel('Ionenquelle', new THREE.Vector3(-4, -1.5, 0), 0.45)),
                scene.add(createLabel('E- und B-Feld', new THREE.Vector3(-0.25, 2, 0), 0.45)),
                scene.add(createLabel('Auffangschirm', new THREE.Vector3(4, -2, 0), 0.45)));
            const impactPoints = [],
                IMPACT_LIFETIME_BASE = 8e3;
            function getImpactLifetime() {
                return (params.emissionRate / 200) * 8e3;
            }
            const screenCanvas = document.getElementById('screenCanvas'),
                screenCtx = screenCanvas.getContext('2d'),
                diagramPoints = [];
            function initScreenDiagram() {
                ((screenCtx.fillStyle = '#fff'),
                    screenCtx.fillRect(0, 0, 200, 200),
                    (screenCtx.strokeStyle = '#333'),
                    (screenCtx.lineWidth = 1),
                    screenCtx.beginPath(),
                    screenCtx.moveTo(20, 180),
                    screenCtx.lineTo(20, 10),
                    screenCtx.stroke(),
                    screenCtx.beginPath(),
                    screenCtx.moveTo(20, 10),
                    screenCtx.lineTo(16, 18),
                    screenCtx.lineTo(24, 18),
                    screenCtx.closePath(),
                    screenCtx.fill(),
                    screenCtx.beginPath(),
                    screenCtx.moveTo(20, 180),
                    screenCtx.lineTo(190, 180),
                    screenCtx.stroke(),
                    screenCtx.beginPath(),
                    screenCtx.moveTo(190, 180),
                    screenCtx.lineTo(182, 176),
                    screenCtx.lineTo(182, 184),
                    screenCtx.closePath(),
                    screenCtx.fill(),
                    (screenCtx.fillStyle = '#333'),
                    (screenCtx.font = '12px Segoe UI, Arial'),
                    screenCtx.fillText('y', 8, 15),
                    screenCtx.fillText('z', 185, 195),
                    screenCtx.fillText('0', 8, 190));
            }
            function redrawDiagram() {
                initScreenDiagram();
                const e = Date.now(),
                    t = getImpactLifetime();
                diagramPoints.forEach((n) => {
                    const s = e - n.time,
                        r = Math.max(0, 1 - s / t),
                        i = 20 + (n.z / 1.5) * 160,
                        a = 180 - (n.y / 1.5) * 160,
                        o = ISOTOPES[n.mass]?.color || 16737792,
                        c = (o >> 16) & 255,
                        l = (o >> 8) & 255,
                        m = 255 & o;
                    ((screenCtx.fillStyle = `rgba(${c}, ${l}, ${m}, ${r})`),
                        screenCtx.beginPath(),
                        screenCtx.arc(i, a, 4, 0, 2 * Math.PI),
                        screenCtx.fill());
                });
            }
            function drawImpactOnDiagram(e, t, n) {
                diagramPoints.push({ y: e, z: t, mass: n, time: Date.now() });
            }
            function clearScreenDiagram() {
                ((diagramPoints.length = 0), initScreenDiagram());
            }
            function updateImpactPoints() {
                const e = Date.now(),
                    t = getImpactLifetime();
                for (let n = impactPoints.length - 1; n >= 0; n--) {
                    const s = impactPoints[n],
                        r = e - s.time;
                    r > t
                        ? (scene.remove(s.mesh),
                          s.mesh.geometry.dispose(),
                          s.mesh.material.dispose(),
                          impactPoints.splice(n, 1))
                        : (s.mesh.material.opacity = Math.max(0, 1 - r / t));
                }
                for (let n = diagramPoints.length - 1; n >= 0; n--)
                    e - diagramPoints[n].time > t && diagramPoints.splice(n, 1);
                redrawDiagram();
            }
            initScreenDiagram();
            class Ion {
                constructor(e) {
                    this.massU = e;
                    const t = ISOTOPES[e] || { color: 16737792 };
                    ((this.mesh = new THREE.Mesh(
                        new THREE.SphereGeometry(0.07, 16, 16),
                        new THREE.MeshStandardMaterial({
                            color: t.color,
                            emissive: t.color,
                            emissiveIntensity: 0.3,
                        })
                    )),
                        (this.x = -3.5),
                        (this.y = 0),
                        (this.z = 0));
                    const n = (params.v0 / 1e5) * 0.08;
                    ((this.vx = n),
                        (this.vy = 0),
                        (this.vz = 0),
                        (this.massFactor = e / 12),
                        this.mesh.position.set(this.x, this.y, this.z),
                        (this.alive = !0),
                        scene.add(this.mesh));
                }
                update() {
                    if (!this.alive) return;
                    const e = params.simSpeed;
                    if (this.x >= -1.5 && this.x <= 1) {
                        const t = params.E / 1e4,
                            n = (1e3 * params.B) / 100;
                        ((this.vy += ((8e-4 * t) / this.massFactor) * e),
                            (this.vz += ((6e-4 * n) / this.massFactor) * e));
                    }
                    ((this.x += this.vx * e),
                        (this.y += this.vy * e),
                        (this.z += this.vz * e),
                        this.mesh.position.set(this.x, this.y, this.z),
                        this.x >= 3.95 && (this.createImpact(), (this.alive = !1)),
                        (this.x > 5 || Math.abs(this.y) > 2 || Math.abs(this.z) > 1.5) &&
                            (this.alive = !1));
                }
                createImpact() {
                    const e = ISOTOPES[this.massU] || { color: 16737792 },
                        t = new THREE.Mesh(
                            new THREE.CircleGeometry(0.05, 16),
                            new THREE.MeshBasicMaterial({
                                color: e.color,
                                transparent: !0,
                                opacity: 1,
                            })
                        );
                    ((t.rotation.y = -Math.PI / 2),
                        t.position.set(3.96, this.y, this.z),
                        scene.add(t),
                        impactPoints.push({ mesh: t, time: Date.now() }),
                        drawImpactOnDiagram(this.y, this.z, this.massU));
                    const n = (10 * this.y).toFixed(2),
                        s = (10 * this.z).toFixed(2),
                        r = ISOTOPES[this.massU]?.name || this.massU + 'u';
                    document.getElementById('screenCoords').textContent =
                        `Letzter Treffer: ${r} bei y = ${n} mm, z = ${s} mm`;
                }
                dispose() {
                    (scene.remove(this.mesh),
                        this.mesh.geometry.dispose(),
                        this.mesh.material.dispose());
                }
            }
            const ions = [];
            let isEmitting = !1,
                emissionInterval = null;
            function getRandomIsotope() {
                const e = params.selectedIsotopes;
                return 0 === e.length ? 12 : e[Math.floor(Math.random() * e.length)];
            }
            function toggleEmission() {
                isEmitting = !isEmitting;
                const e = document.getElementById('toggleEmission');
                isEmitting
                    ? ((e.textContent = '‚è∏ Emission stoppen'),
                      (emissionInterval = setInterval(() => {
                          ions.length < 40 &&
                              params.selectedIsotopes.length > 0 &&
                              ions.push(new Ion(getRandomIsotope()));
                      }, params.emissionRate)))
                    : ((e.textContent = '‚ñ∂ Emission starten'),
                      clearInterval(emissionInterval),
                      (emissionInterval = null));
            }
            function restartEmission() {
                isEmitting &&
                    (clearInterval(emissionInterval),
                    (emissionInterval = setInterval(() => {
                        ions.length < 40 &&
                            params.selectedIsotopes.length > 0 &&
                            ions.push(new Ion(getRandomIsotope()));
                    }, params.emissionRate)));
            }
            function clearScreen() {
                (impactPoints.forEach((e) => {
                    (scene.remove(e.mesh), e.mesh.geometry.dispose(), e.mesh.material.dispose());
                }),
                    (impactPoints.length = 0),
                    clearScreenDiagram(),
                    (document.getElementById('screenCoords').textContent =
                        'Letzte Auftreffposition: y = --, z = --'));
            }
            const toggleBtn = document.getElementById('toggleEmission'),
                clearBtn = document.getElementById('clearScreen');
            (toggleBtn && toggleBtn.addEventListener('click', toggleEmission),
                clearBtn && clearBtn.addEventListener('click', clearScreen));
            const paramInputs = {
                    E: document.getElementById('paramE'),
                    B: document.getElementById('paramB'),
                    v0: document.getElementById('paramV'),
                    rate: document.getElementById('paramRate'),
                    speed: document.getElementById('paramSpeed'),
                },
                paramValues = {
                    E: document.getElementById('valueE'),
                    B: document.getElementById('valueB'),
                    v0: document.getElementById('valueV'),
                    rate: document.getElementById('valueRate'),
                    speed: document.getElementById('valueSpeed'),
                };
            function updateSelectedIsotopes() {
                const e = document.querySelectorAll('#isotopeSelection input[type="checkbox"]');
                ((params.selectedIsotopes = []),
                    e.forEach((e) => {
                        e.checked && params.selectedIsotopes.push(parseInt(e.value));
                    }));
            }
            function updateParams() {
                ((params.E = parseFloat(paramInputs.E.value)),
                    (params.B = parseFloat(paramInputs.B.value) / 1e3),
                    (params.v0 = 1e3 * parseFloat(paramInputs.v0.value)),
                    (params.emissionRate = parseFloat(paramInputs.rate.value)),
                    (params.simSpeed = parseFloat(paramInputs.speed.value)),
                    (paramValues.E.textContent = `${paramInputs.E.value} V/m`),
                    (paramValues.B.textContent = `${paramInputs.B.value} mT`),
                    (paramValues.v0.textContent = `${paramInputs.v0.value} km/s`),
                    (paramValues.rate.textContent = `${Math.round(1e3 / params.emissionRate)}/s`),
                    (paramValues.speed.textContent = `${params.simSpeed}√ó`),
                    updateSelectedIsotopes(),
                    restartEmission(),
                    calculateResults());
            }
            function calculateResults() {
                const e = 12 * u,
                    t = (params.q * params.E * params.l * params.L) / (e * params.v0 * params.v0),
                    n = (params.q * params.B * params.l * params.L) / (e * params.v0),
                    s = (params.q * params.B * params.B * params.l * params.L) / (e * params.E),
                    r = (n * n) / t;
                ((document.getElementById('calcY').textContent = (1e3 * t).toExponential(3)),
                    (document.getElementById('calcZ').textContent = (1e3 * n).toExponential(3)),
                    (document.getElementById('calcC').textContent = s.toExponential(3)),
                    (document.getElementById('calcCheck').textContent =
                        `${r.toExponential(3)} ‚âà C ‚úì`));
            }
            function calculateMass() {
                const t = parseFloat(document.getElementById('measY').value) / 1e3,
                    n = parseFloat(document.getElementById('measZ').value) / 1e3;
                if (t <= 0 || n <= 0)
                    return (
                        (document.getElementById('calcMQ').textContent = '--'),
                        void (document.getElementById('calcMass').textContent = '--')
                    );
                const s = ((params.B * params.B * params.l * params.L) / params.E) * (t / (n * n)),
                    r = (s * e) / u;
                ((document.getElementById('calcMQ').textContent = s.toExponential(3)),
                    (document.getElementById('calcMass').textContent = r.toFixed(2)));
            }
            (Object.values(paramInputs).forEach((e) => {
                e && e.addEventListener('input', updateParams);
            }),
                document.querySelectorAll('#isotopeSelection input').forEach((e) => {
                    e.addEventListener('change', updateSelectedIsotopes);
                }));
            const measYEl = document.getElementById('measY'),
                measZEl = document.getElementById('measZ');
            function animate() {
                requestAnimationFrame(animate);
                for (let e = ions.length - 1; e >= 0; e--)
                    (ions[e].update(), ions[e].alive || (ions[e].dispose(), ions.splice(e, 1)));
                (updateImpactPoints(), controls.update(), renderer.render(scene, camera));
            }
            function onResize() {
                const e = container.clientWidth,
                    t = container.clientHeight;
                ((camera.aspect = e / t), camera.updateProjectionMatrix(), renderer.setSize(e, t));
            }
            (measYEl && measYEl.addEventListener('input', calculateMass),
                measZEl && measZEl.addEventListener('input', calculateMass),
                paramInputs.E && (updateParams(), calculateMass()),
                window.addEventListener('resize', onResize),
                animate());
            let presRenderer = null,
                presScene = null,
                presCamera = null,
                presControls = null,
                presIons = [],
                presImpactPoints = [],
                presDiagramPoints = [],
                presIsEmitting = !1,
                presEmissionInterval = null,
                presAnimationId = null,
                presScreenCtx = null;
            function initPresentationSimulation() {
                const e = document.getElementById('pres-canvas-container');
                if (!e || presRenderer) return;
                ((presScene = new THREE.Scene()),
                    (presScene.background = new THREE.Color(16777215)));
                const t = window.innerWidth <= 1200 || window.innerHeight <= 800,
                    n = t ? 9 : 6.5,
                    s = t ? 55 : 50;
                ((presCamera = new THREE.PerspectiveCamera(
                    s,
                    e.clientWidth / e.clientHeight,
                    0.1,
                    1e3
                )),
                    presCamera.position.set(0, 0, n),
                    (presRenderer = new THREE.WebGLRenderer({ antialias: !0 })),
                    presRenderer.setSize(e.clientWidth, e.clientHeight),
                    presRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)),
                    e.appendChild(presRenderer.domElement),
                    (presControls = new OrbitControls(presCamera, presRenderer.domElement)),
                    (presControls.enableDamping = !0),
                    (presControls.dampingFactor = 0.05),
                    (presControls.enableRotate = !1),
                    (presControls.enablePan = !1),
                    (presControls.enableZoom = !1),
                    presScene.add(new THREE.AmbientLight(16777215, 0.7)));
                const r = new THREE.DirectionalLight(16777215, 0.8);
                (r.position.set(5, 10, 7),
                    presScene.add(r),
                    presScene.add(ionSource.clone()),
                    presScene.add(fieldGroup.clone()),
                    presScene.add(screen.clone()),
                    presScene.add(screenBorder.clone()),
                    presScene.add(createAxis([3.95, 0, 0], [5.45, 0, 0], 0)),
                    presScene.add(createAxis([3.95, 0, 0], [3.95, 1.5, 0], 0)),
                    presScene.add(createAxis([3.95, 0, 0], [3.95, 0, 1.2], 0)));
                const i = t ? 0.35 : 0.45;
                (presScene.add(createLabel('Ionenquelle', new THREE.Vector3(-4, -1.5, 0), i)),
                    presScene.add(createLabel('E- und B-Feld', new THREE.Vector3(-0.25, 2, 0), i)),
                    presScene.add(createLabel('Auffangschirm', new THREE.Vector3(4, -2, 0), i)));
                const a = document.getElementById('presScreenCanvas');
                ((presScreenCtx = a.getContext('2d')), initPresScreenDiagram(), animatePres());
            }
            function initPresScreenDiagram() {
                presScreenCtx &&
                    ((presScreenCtx.fillStyle = '#fff'),
                    presScreenCtx.fillRect(0, 0, 240, 240),
                    (presScreenCtx.strokeStyle = '#333'),
                    (presScreenCtx.lineWidth = 1),
                    presScreenCtx.beginPath(),
                    presScreenCtx.moveTo(30, 210),
                    presScreenCtx.lineTo(30, 20),
                    presScreenCtx.stroke(),
                    presScreenCtx.beginPath(),
                    presScreenCtx.moveTo(30, 20),
                    presScreenCtx.lineTo(26, 28),
                    presScreenCtx.lineTo(34, 28),
                    presScreenCtx.closePath(),
                    presScreenCtx.fill(),
                    presScreenCtx.beginPath(),
                    presScreenCtx.moveTo(30, 210),
                    presScreenCtx.lineTo(220, 210),
                    presScreenCtx.stroke(),
                    presScreenCtx.beginPath(),
                    presScreenCtx.moveTo(220, 210),
                    presScreenCtx.lineTo(212, 206),
                    presScreenCtx.lineTo(212, 214),
                    presScreenCtx.closePath(),
                    presScreenCtx.fill(),
                    (presScreenCtx.fillStyle = '#333'),
                    (presScreenCtx.font = '14px Segoe UI, Arial'),
                    presScreenCtx.fillText('y', 12, 25),
                    presScreenCtx.fillText('z', 215, 230),
                    presScreenCtx.fillText('0', 12, 220));
            }
            function redrawPresDiagram() {
                initPresScreenDiagram();
                const e = Date.now(),
                    t = getImpactLifetime();
                presDiagramPoints.forEach((n) => {
                    const s = e - n.time,
                        r = Math.max(0, 1 - s / t),
                        i = 30 + (n.z / 1.5) * 180,
                        a = 210 - (n.y / 1.5) * 180,
                        o = ISOTOPES[n.mass]?.color || 16737792,
                        c = (o >> 16) & 255,
                        l = (o >> 8) & 255,
                        m = 255 & o;
                    ((presScreenCtx.fillStyle = `rgba(${c}, ${l}, ${m}, ${r})`),
                        presScreenCtx.beginPath(),
                        presScreenCtx.arc(i, a, 5, 0, 2 * Math.PI),
                        presScreenCtx.fill());
                });
            }
            class PresIon {
                constructor(e) {
                    this.massU = e;
                    const t = ISOTOPES[e] || { color: 16737792 };
                    ((this.mesh = new THREE.Mesh(
                        new THREE.SphereGeometry(0.07, 16, 16),
                        new THREE.MeshStandardMaterial({
                            color: t.color,
                            emissive: t.color,
                            emissiveIntensity: 0.3,
                        })
                    )),
                        (this.x = -3.5),
                        (this.y = 0),
                        (this.z = 0));
                    const n = (params.v0 / 1e5) * 0.08;
                    ((this.vx = n),
                        (this.vy = 0),
                        (this.vz = 0),
                        (this.massFactor = e / 12),
                        this.mesh.position.set(this.x, this.y, this.z),
                        (this.alive = !0),
                        presScene.add(this.mesh));
                }
                update() {
                    if (!this.alive) return;
                    const e = params.simSpeed;
                    if (this.x >= -1.5 && this.x <= 1) {
                        const t = params.E / 1e4,
                            n = (1e3 * params.B) / 100;
                        ((this.vy += ((8e-4 * t) / this.massFactor) * e),
                            (this.vz += ((6e-4 * n) / this.massFactor) * e));
                    }
                    ((this.x += this.vx * e),
                        (this.y += this.vy * e),
                        (this.z += this.vz * e),
                        this.mesh.position.set(this.x, this.y, this.z),
                        this.x >= 3.95 && (this.createImpact(), (this.alive = !1)),
                        (this.x > 5 || Math.abs(this.y) > 2 || Math.abs(this.z) > 1.5) &&
                            (this.alive = !1));
                }
                createImpact() {
                    const e = ISOTOPES[this.massU] || { color: 16737792 },
                        t = new THREE.Mesh(
                            new THREE.CircleGeometry(0.05, 16),
                            new THREE.MeshBasicMaterial({
                                color: e.color,
                                transparent: !0,
                                opacity: 1,
                            })
                        );
                    ((t.rotation.y = -Math.PI / 2),
                        t.position.set(3.96, this.y, this.z),
                        presScene.add(t),
                        presImpactPoints.push({ mesh: t, time: Date.now() }),
                        presDiagramPoints.push({
                            y: this.y,
                            z: this.z,
                            mass: this.massU,
                            time: Date.now(),
                        }));
                }
                dispose() {
                    (presScene.remove(this.mesh),
                        this.mesh.geometry.dispose(),
                        this.mesh.material.dispose());
                }
            }
            function togglePresEmission() {
                presIsEmitting = !presIsEmitting;
                const e = document.getElementById('presToggleEmission');
                presIsEmitting
                    ? ((e.textContent = '‚è∏ Emission stoppen'),
                      (presEmissionInterval = setInterval(() => {
                          presIons.length < 40 &&
                              params.selectedIsotopes.length > 0 &&
                              presIons.push(new PresIon(getRandomIsotope()));
                      }, params.emissionRate)))
                    : ((e.textContent = '‚ñ∂ Emission starten'),
                      clearInterval(presEmissionInterval),
                      (presEmissionInterval = null));
            }
            function clearPresScreen() {
                (presImpactPoints.forEach((e) => {
                    (presScene.remove(e.mesh),
                        e.mesh.geometry.dispose(),
                        e.mesh.material.dispose());
                }),
                    (presImpactPoints.length = 0),
                    (presDiagramPoints.length = 0),
                    initPresScreenDiagram());
            }
            function updatePresImpactPoints() {
                const e = Date.now(),
                    t = getImpactLifetime();
                for (let n = presImpactPoints.length - 1; n >= 0; n--) {
                    const s = presImpactPoints[n],
                        r = e - s.time;
                    r > t
                        ? (presScene.remove(s.mesh),
                          s.mesh.geometry.dispose(),
                          s.mesh.material.dispose(),
                          presImpactPoints.splice(n, 1))
                        : (s.mesh.material.opacity = Math.max(0, 1 - r / t));
                }
                for (let n = presDiagramPoints.length - 1; n >= 0; n--)
                    e - presDiagramPoints[n].time > t && presDiagramPoints.splice(n, 1);
                redrawPresDiagram();
            }
            function animatePres() {
                if (
                    ((presAnimationId = requestAnimationFrame(animatePres)),
                    presScene && presRenderer)
                ) {
                    for (let e = presIons.length - 1; e >= 0; e--)
                        (presIons[e].update(),
                            presIons[e].alive || (presIons[e].dispose(), presIons.splice(e, 1)));
                    (updatePresImpactPoints(),
                        presControls?.update(),
                        presRenderer.render(presScene, presCamera));
                }
            }
            function cleanupPresentationSimulation() {
                if (
                    (presEmissionInterval &&
                        (clearInterval(presEmissionInterval), (presEmissionInterval = null)),
                    (presIsEmitting = !1),
                    presAnimationId &&
                        (cancelAnimationFrame(presAnimationId), (presAnimationId = null)),
                    presIons.forEach((e) => e.dispose()),
                    (presIons = []),
                    presImpactPoints.forEach((e) => {
                        (presScene?.remove(e.mesh),
                            e.mesh.geometry.dispose(),
                            e.mesh.material.dispose());
                    }),
                    (presImpactPoints = []),
                    (presDiagramPoints = []),
                    presRenderer)
                ) {
                    const e = document.getElementById('pres-canvas-container');
                    (e &&
                        presRenderer.domElement.parentNode === e &&
                        e.removeChild(presRenderer.domElement),
                        presRenderer.dispose(),
                        (presRenderer = null));
                }
                ((presScene = null),
                    (presCamera = null),
                    (presControls = null),
                    (presScreenCtx = null));
                const e = document.getElementById('presToggleEmission');
                e && (e.textContent = '‚ñ∂ Emission starten');
            }
            function generateQRCode() {
                const e = document.getElementById('qrImage'),
                    t = encodeURIComponent(window.location.href);
                e.src = `https://api.qrserver.com/v1/create-qr-code/?size=280x280&data=${t}`;
            }
            ((window.initPresentationSimulation = initPresentationSimulation),
                (window.cleanupPresentationSimulation = cleanupPresentationSimulation),
                (window.togglePresEmission = togglePresEmission),
                (window.clearPresScreen = clearPresScreen),
                'undefined' != typeof renderMathInElement &&
                    renderMathInElement(document.body, {
                        delimiters: [
                            { left: '$$', right: '$$', display: !0 },
                            { left: '\\(', right: '\\)', display: !1 },
                        ],
                    }));
            const overlay = document.getElementById('presentationOverlay'),
                slides = overlay.querySelectorAll('.slide');
            let currentSlide = 0;
            function updateSlideIndicator() {
                ((document.getElementById('currentSlide').textContent = currentSlide + 1),
                    (document.getElementById('prevSlide').disabled = 0 === currentSlide),
                    (document.getElementById('nextSlide').disabled =
                        currentSlide === slides.length - 1));
            }
            function showSlide(e) {
                (slides.forEach((t, n) => t.classList.toggle('active', n === e)),
                    (currentSlide = e),
                    updateSlideIndicator(),
                    2 === e &&
                        'function' == typeof window.initPresentationSimulation &&
                        setTimeout(() => {
                            (window.initPresentationSimulation(),
                                (window.innerWidth <= 1200 || window.innerHeight <= 800) &&
                                    !presIsEmitting &&
                                    togglePresEmission());
                        }, 100),
                    13 === e && setTimeout(drawSpectrumChart, 100),
                    'undefined' != typeof renderMathInElement &&
                        renderMathInElement(slides[e], {
                            delimiters: [
                                { left: '$$', right: '$$', display: !0 },
                                { left: '\\(', right: '\\)', display: !1 },
                            ],
                        }));
            }
            function nextSlide() {
                currentSlide < slides.length - 1 && showSlide(currentSlide + 1);
            }
            function prevSlide() {
                currentSlide > 0 && showSlide(currentSlide - 1);
            }
            function enterPresentation() {
                (document.body.classList.add('presentation-mode'),
                    generateQRCode(),
                    document.documentElement.requestFullscreen
                        ? document.documentElement.requestFullscreen()
                        : document.documentElement.webkitRequestFullscreen &&
                          document.documentElement.webkitRequestFullscreen(),
                    showSlide(0));
            }
            function exitPresentation() {
                (document.body.classList.remove('presentation-mode'),
                    'function' == typeof window.cleanupPresentationSimulation &&
                        window.cleanupPresentationSimulation(),
                    document.exitFullscreen
                        ? document.exitFullscreen().catch(() => {})
                        : document.webkitExitFullscreen && document.webkitExitFullscreen());
            }
            function checkExternalDisplay() {
                if (navigator.presentation && navigator.presentation.receiver)
                    return void document.body.classList.add('external-display');
                window.getScreenDetails &&
                    window
                        .getScreenDetails()
                        .then((e) => {
                            if (e.screens.length > 1) {
                                e.currentScreen.isPrimary ||
                                    document.body.classList.add('external-display');
                            }
                        })
                        .catch(() => {});
                window.addEventListener('resize', () => {
                    document.body.classList.contains('presentation-mode') &&
                        (window.screenX < 0 ||
                        window.screenX > window.screen.availWidth ||
                        window.screenY < 0 ||
                        window.screenY > window.screen.availHeight
                            ? document.body.classList.add('external-display')
                            : document.body.classList.remove('external-display'));
                });
            }
            function drawSpectrumChart() {
                const e = document.getElementById('spectrumChart');
                if (!e) return;
                const t = e.getContext('2d'),
                    n = e.width,
                    s = e.height;
                ((t.fillStyle = '#fafafa'), t.fillRect(0, 0, n, s));
                const r = 40,
                    i = 30,
                    a = 50,
                    o = 60,
                    c = n - o - i,
                    l = s - r - a,
                    m = (e) => o + (e / 70) * c,
                    d = (e) => r + l - (e / 100) * l;
                ((t.strokeStyle = '#e5e7eb'), (t.lineWidth = 1));
                for (let e = 0; e <= 100; e += 20)
                    (t.beginPath(), t.moveTo(o, d(e)), t.lineTo(n - i, d(e)), t.stroke());
                for (let e = 0; e <= 70; e += 10)
                    (t.beginPath(), t.moveTo(m(e), r), t.lineTo(m(e), s - a), t.stroke());
                ((t.strokeStyle = '#374151'),
                    (t.lineWidth = 2),
                    t.beginPath(),
                    t.moveTo(o, s - a),
                    t.lineTo(n - i, s - a),
                    t.stroke(),
                    t.beginPath(),
                    t.moveTo(o, r),
                    t.lineTo(o, s - a),
                    t.stroke(),
                    (t.fillStyle = '#374151'),
                    (t.font = '14px Segoe UI, system-ui, sans-serif'),
                    (t.textAlign = 'center'));
                for (let e = 0; e <= 70; e += 10) t.fillText(e.toString(), m(e), s - a + 20);
                (t.fillText('Retentionszeit (min)', n / 2, s - 10), (t.textAlign = 'right'));
                for (let e = 0; e <= 100; e += 20) t.fillText(e.toString(), o - 10, d(e) + 5);
                (t.save(),
                    t.translate(15, s / 2),
                    t.rotate(-Math.PI / 2),
                    (t.textAlign = 'center'),
                    t.fillText('Relative Intensit√§t (%)', 0, 0),
                    t.restore(),
                    [
                        { rt: 3.49, intensity: 8, name: '' },
                        { rt: 4.38, intensity: 7, name: '' },
                        { rt: 5.37, intensity: 9, name: '' },
                        { rt: 8.13, intensity: 35, name: 'Limonen' },
                        { rt: 9.61, intensity: 18, name: '' },
                        { rt: 11.05, intensity: 10, name: '' },
                        { rt: 11.93, intensity: 8, name: '' },
                        { rt: 16.91, intensity: 12, name: '' },
                        { rt: 18.72, intensity: 9, name: '' },
                        { rt: 20.12, intensity: 11, name: '' },
                        { rt: 23.48, intensity: 10, name: '' },
                        { rt: 24.93, intensity: 38, name: 'Eucalyptol' },
                        { rt: 27.34, intensity: 9, name: '' },
                        { rt: 29.48, intensity: 100, name: 'Œ±-Terpineol' },
                        { rt: 30.31, intensity: 15, name: '' },
                        { rt: 33.12, intensity: 8, name: '' },
                        { rt: 34.53, intensity: 7, name: '' },
                        { rt: 39.7, intensity: 22, name: 'Cinnamaldehyd' },
                        { rt: 41.13, intensity: 6, name: '' },
                        { rt: 42.14, intensity: 18, name: 'Vanillin' },
                        { rt: 47.03, intensity: 8, name: '' },
                        { rt: 50.87, intensity: 7, name: '' },
                        { rt: 52.3, intensity: 14, name: '' },
                        { rt: 55.34, intensity: 16, name: '5-HMF' },
                        { rt: 57.12, intensity: 6, name: '' },
                        { rt: 57.6, intensity: 5, name: '' },
                        { rt: 61.53, intensity: 4, name: '' },
                        { rt: 63.48, intensity: 5, name: '' },
                        { rt: 66.23, intensity: 3, name: '' },
                    ].forEach((e) => {
                        const n = m(e.rt),
                            r = d(e.intensity);
                        (e.intensity >= 80
                            ? (t.strokeStyle = '#059669')
                            : e.intensity >= 30
                              ? (t.strokeStyle = '#0284c7')
                              : (t.strokeStyle = '#6b7280'),
                            (t.lineWidth = 3),
                            t.beginPath(),
                            t.moveTo(n, s - a),
                            t.lineTo(n, r),
                            t.stroke(),
                            (t.fillStyle = t.strokeStyle),
                            t.beginPath(),
                            t.arc(n, r, 3, 0, 2 * Math.PI),
                            t.fill(),
                            e.name &&
                                ((t.fillStyle = '#1f2937'),
                                (t.font = 'bold 11px Segoe UI, system-ui, sans-serif'),
                                (t.textAlign = 'center'),
                                t.save(),
                                t.translate(n, r - 10),
                                t.rotate(-Math.PI / 4),
                                t.fillText(e.name, 0, 0),
                                t.restore()));
                    }),
                    (t.fillStyle = '#1f2937'),
                    (t.font = 'bold 16px Segoe UI, system-ui, sans-serif'),
                    (t.textAlign = 'center'),
                    t.fillText('GC-MS Spektrum von Coca-Cola', n / 2, 25));
            }
            (document
                .getElementById('startPresentation')
                .addEventListener('click', enterPresentation),
                document
                    .getElementById('exitPresentation')
                    .addEventListener('click', exitPresentation),
                document.getElementById('nextSlide').addEventListener('click', nextSlide),
                document.getElementById('prevSlide').addEventListener('click', prevSlide),
                document.addEventListener('keydown', (e) => {
                    if (document.body.classList.contains('presentation-mode'))
                        switch (e.key) {
                            case 'ArrowRight':
                            case 'ArrowDown':
                            case ' ':
                            case 'PageDown':
                            case 'Enter':
                                (e.preventDefault(), nextSlide());
                                break;
                            case 'ArrowLeft':
                            case 'ArrowUp':
                            case 'PageUp':
                            case 'Backspace':
                                (e.preventDefault(), prevSlide());
                                break;
                            case 'Escape':
                            case 'b':
                            case 'B':
                            case '.':
                                exitPresentation();
                                break;
                            case 'Home':
                                (e.preventDefault(), showSlide(0));
                                break;
                            case 'End':
                                (e.preventDefault(), showSlide(slides.length - 1));
                        }
                }),
                document.addEventListener('fullscreenchange', () => {
                    !document.fullscreenElement &&
                        document.body.classList.contains('presentation-mode') &&
                        exitPresentation();
                }),
                checkExternalDisplay());
            const presToggleBtn = document.getElementById('presToggleEmission'),
                presClearBtn = document.getElementById('presClearScreen');
            (presToggleBtn && presToggleBtn.addEventListener('click', togglePresEmission),
                presClearBtn && presClearBtn.addEventListener('click', clearPresScreen));
        </script>
    </body>
</html>
